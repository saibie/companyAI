<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ agent.name }} - Agent Detail</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .container { display: flex; gap: 20px; flex-wrap: wrap; }
        .panel { border: 1px solid #ccc; padding: 15px; border-radius: 8px; flex: 1; min-width: 300px; }
        h1, h2 { color: #333; }
        ul { list-style: none; padding: 0; }
        li { background: #f9f9f9; margin-bottom: 5px; padding: 8px; border-radius: 4px; }
        .agent-info p { margin: 5px 0; }
        .back-link { display: block; margin-bottom: 20px; color: #007bff; text-decoration: none; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <a href="{% url 'corp:dashboard' %}" class="back-link">&larr; Back to Dashboard</a>
    <h1>{{ agent.name }} ({{ agent.role }})</h1>

    <div class="agent-info">
        <p><strong>Manager:</strong> {% if agent.manager %}{{ agent.manager.name }}{% else %}CEO{% endif %}</p>
        <p><strong>Status:</strong> {% if agent.is_active %}Active{% else %}Inactive{% endif %}</p>
    </div>

    <div class="container">
        <div class="panel">
            <h2>Tasks Created</h2>
            <ul>
                {% for task in created_tasks %}
                    <li>{{ task.title }} (Status: {{ task.status }})</li>
                {% empty %}
                    <li>No tasks created by this agent.</li>
                {% endfor %}
            </ul>
        </div>

        <div class="panel">
            <h2>Tasks Assigned</h2>
            <ul>
                {% for task in assigned_tasks %}
                    <li>{{ task.title }} (Status: {{ task.status }})</li>
                {% empty %}
                    <li>No tasks assigned to this agent.</li>
                {% endfor %}
            </ul>
        </div>

        <div class="panel">
            <h2>Memories</h2>
            <ul>
                {% for memory in memories %}
                    <li><strong>{{ memory.type|capfirst }}:</strong> {{ memory.content|truncatechars:100 }} ({{ memory.created_at|date:"Y-m-d H:i" }})</li>
                {% empty %}
                    <li>No memories for this agent.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</body>
</html>
