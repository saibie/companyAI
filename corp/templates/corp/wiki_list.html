{% extends 'corp/base.html' %}

{% block title %}Wiki - AI Corp{% endblock %}

{% block content %}
    <div class="panel">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h1>ğŸ“š Corporate Knowledge Base</h1>
            </div>

        <div class="wiki-grid" style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));">
        {% for memory in memories %}
            <div class="wiki-card" style="border: 1px solid #e1e4e8; border-radius: 8px; padding: 20px; background: #fff; transition: transform 0.2s;">
                <h3 style="margin-top: 0;">
                    <a href="{% url 'corp:wiki_detail' pk=memory.id %}" style="text-decoration: none; color: #0366d6;">
                        {{ memory.subject }}
                    </a>
            </h3>
                <div style="font-size: 0.85em; color: #666; margin-bottom: 10px;">
                    ğŸ“… {{ memory.created_at|date:"Y-m-d H:i" }} <br>
                {% if memory.source_task %}
                        ğŸ”— From Task: {{ memory.source_task.title|truncatechars:20 }}
                {% else %}
                        âœï¸ Manual Entry
                {% endif %}
                </div>
                <p style="color: #444; font-size: 0.95em; line-height: 1.5;">
                    {{ memory.content|truncatechars:100 }}
            </p>
                <a href="{% url 'corp:wiki_detail' pk=memory.id %}" style="font-size: 0.9em; text-decoration: none; color: #007bff;">Read more &rarr;</a>
            </div>
            {% empty %}
            <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">
                <p>ì•„ì§ ì €ì¥ëœ ì§€ì‹ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                <p>ì—ì´ì „íŠ¸ê°€ íƒœìŠ¤í¬ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ìë™ìœ¼ë¡œ ì—¬ê¸°ì— ì§€ì‹ì´ ìŒ“ì…ë‹ˆë‹¤.</p>
            </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}